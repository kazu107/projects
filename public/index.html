<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/6.65.7/mode/python/python.min.js"></script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <title>Code Executor</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <style>
        body {
            padding-top: 50px;
            background-color: #F5DEB3;
        }
        .starter-template {
            padding: 40px 15px;
            background-color: #F0FFF0;
        }
        h1 {
            padding-bottom: 50px;
        }
        .lead {
            font-size: 150%;
            padding-top: 50px;
            padding-bottom: 50px;
        }
    </style>
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="/">Code Executor</a>
        </div>
        <ul class="nav navbar-nav navbar-right" id="auth-links">
            <!-- 認証リンクがここに挿入されます -->
        </ul>
    </div>
</nav>
<div class="container">
    <div class="starter-template">
        <div class="jumbotron">
            <h1>kazu107's WebSite_</h1>
        </div>
        <p class="lead">入力のやり方</p>
        <a href="/problem/input_p1.html" target="_blank">\(1\): 文字列</a>
        <a href="/problem/input_p2.html" target="_blank">\(2\): 整数</a>
        <a href="/problem/input_p3.html" target="_blank">\(3\): 小数</a>
        <a href="/problem/input_p4.html" target="_blank">\(4\): 2つの文字列</a>
        <a href="/problem/input_p5.html" target="_blank">\(5\): 2つの整数</a>
        <a href="/problem/input_p6.html" target="_blank">\(6\): 複数の文字列</a>
        <a href="/problem/input_p7.html" target="_blank">\(7\): 複数の整数</a>
        <a href="/problem/input_p8.html" target="_blank">\(8\): 複数行</a>
        <a href="/problem/input_p9.html" target="_blank">\(9\): 複数行複数列</a>

        <h1>問題リンク集</h1>
        <div class="row">
            <div class="col-md-4">
                <p class="lead">１章</p>
                <p><a href="/problem/p1-1.html" target="_blank">\(1-1\): テストの点</a></p>
                <p><a href="/problem/p1-2.html" target="_blank">\(1-2\): すごろく</a></p>
                <p><a href="/problem/p1-3.html" target="_blank">\(1-3\): 身長</a></p>
            </div>
            <div class="col-md-4">
                <p class="lead">２章</p>
                <!-- ２章のリンクをここに挿入 -->
                <p><a href="/problem/p2-1.html" target="_blank">\(2-1\): ゲーム木改題</a></p>
                <p><a href="/problem/p2-2.html" target="_blank">\(2-2\): 巡回セールスマン改題</a></p>
            </div>
            <div class="col-md-4">
                <p class="lead">３章</p>
                <!-- ３章のリンクをここに挿入 -->
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', async () => {
        const authLinks = document.getElementById('auth-links');
        const token = localStorage.getItem('token');

        if (token) {
            // トークンがある場合、ユーザー情報を取得
            const response = await fetch('/profile', {
                headers: {
                    'Authorization': 'Bearer ' + token
                }
            });

            if (response.ok) {
                const user = await response.json();
                authLinks.innerHTML = `
                    <li><a href="/dashboard.html">${user.username}</a></li>
                    <li><a href="#" id="logout">ログアウト</a></li>
                `;
                document.getElementById('logout').addEventListener('click', () => {
                    localStorage.removeItem('token');
                    location.reload();
                });
            } else {
                authLinks.innerHTML = `
                    <li><a href="/register.html">Register</a></li>
                    <li><a href="/login.html">Login</a></li>
                `;
            }
        } else {
            // トークンがない場合、RegisterとLoginリンクを表示
            authLinks.innerHTML = `
                <li><a href="/register.html">Register</a></li>
                <li><a href="/login.html">Login</a></li>
            `;
        }
    });
</script>
</body>
</html>
